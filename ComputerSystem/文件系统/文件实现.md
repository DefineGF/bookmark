##### 目录实现

- 线性列表
- 哈希列表 

目录查询：在磁盘上反复搜索完成的，为减少IO操作，可把当前文件目录复制到内存中；



##### 文件逻辑结构

从用户的角度出发。

- 无结构文件（流式文件）
- 有结构文件（记录式文件）
    - 顺序文件
    - 索引文件
    - 索引顺序文件
    - 直接文件 / 散列文件



### 文件实现

#### 文件分配方式

对磁盘非空闲块的管理；

##### 连续分配方式：

```
file_name	start	len
f1			 0       2
f2 			 6		 4
```

- 最小的寻道数和寻道时间

- 支持顺序访问和直接访问，但只适用于长度固定的文件；



##### 链接分配方式：

- 隐式链接：

    特点：每个盘块都有指向下一盘块的指针；目录含文件的首块指针和末块指针；

    问题：无法直接访问，一个指针丢失导致整个文件损坏；指针占用空间。

- 显式链接；

    文件分配表（FAT）：整个磁盘仅一张，系统启动时会读入内存；



##### 索引分配

每个文件的盘块号集中在一起构成索引块表（实质上是磁盘块地址的数组）；

支持大文件：

- 链接
- 多层索引
- 混合索引：直接地址 & 单级索引分配地址 & 两级索引分配地址



#### 文件存储空间管理

##### 位图示法

所有盘块都有一个二进制位与之对应；



##### 空闲表法

对比连续分配方式；

- 首次适应算法
- 循环首次适应算法



##### 空闲链表法

- 空闲盘块链：链首开始，分配时依次摘下；回收时插入末尾
- 空闲盘区链：每个空闲盘区含有若干盘块；所有空闲盘区拉成一条链；



##### 成组链接法

把顺序n个空闲扇区地址保存在第一个空闲扇区内；

最后一个空闲扇区则保存另一个空闲扇区地址；