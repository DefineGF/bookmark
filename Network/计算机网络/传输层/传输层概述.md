#### 传输层概述

- UDP：用户数据报协议，为调用它的程序提供了不可靠、无连接的服务；
- TCP：传输控制协议，为应用程序提供了可靠的、面向连接的服务。

##### 前戏

IP的服务模型是尽力而为交付服务（best-effort delivery service），它虽然尽它最大努力，但是不做任何确保承诺（也就是数据报有可能中途被修改，丢弃等等），因此IP称为不可靠服务。



##### 多路分解/复用

UDP 和 TCP 最基本的责任，将两个端系统间的IP交付服务扩展为运行在端系统上的两个进程之间的交付服务；

UDP 和 TCP还可以通过在其报文段首部中包括**差错检查字段**而提供完整性检查。

- 多路分解：将运输层报文段中的数据交付到正确的套接字的工作称为多路分解；
- 多路复用：在主机上从不同套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，并将报文段传递到网络层；



进程到进程的**数据交付**和**差错检测**是两种最低限度的运输层服务，也是UDP能提供的**仅有**的服务。



##### TCP 附加功能

- 可靠数据传输：通过使用流量控制，序号，确认和定时器，TCP确保**正确的、按序的**将数据从发送进程交付给接收进程。

    （之所以按序是因为应用程序发送的数据太大的时候，会将报文分成固定大小的块，不够位填充，而各个小块的因为路由选择协议到达目的地的时间可能不是按照发送时的顺序，所以TCP需要保证将接收的有序提交）；

- 拥塞控制（congestion control）：提供给整个因特网的服务，TCP拥塞控制防止任何一条TCP连接用过多的流量来淹没通信主机之间的链路和交换设备。这个可以通过调节TCP连接的发送端发送进网络的流量速率来做到。（当然，UDP流量不可调节，使用UDP传输的应用程序可以根据其需要以任何速率发送数据）



##### 套接字

**一个进程有一个或多个套接字，每个套接字能够分配一个端口号**！

UDP**套接字**是由一个二元组全面标识的，该二元组包含一个**目的IP地址和一个目的端口号**。

TCP套接字是由一个四元组标识（源IP地址，源端口号，目的IP地址，目的端口号）