#### UDP

##### 适用场景

- 采用UDP的时候，只要应用层将数据传递给UDP，UDP就会将数据打包进UDP报文段并立即将其传递给网络层（换句话说，只要有数据我就传递，也不管当前数据链路的状态是不是拥塞；虽然拥塞情况下会丢弃。总之传递就完事了）。因为实时应用通常需要最低的发送速率，不希望过分的延迟报文段的传送，且能容忍一些数据的丢失（视频聊天），UDP显然适合这类应用；

- 无需建立连接：TCP开始传输数据之前需要经过三次握手，而UDP不需要，因此不会引入建立连接的时延（这可能是DNS建立在UDP上而非运行在TCP上的主要原因，否则将会慢很多）

- 无连接状态：TCP需要在端系统中维持连接状态，包括接收和发送缓存，拥塞控制参数 以及序号和确认号的参数。因此某中特定服务器运行在UDP上的时候，能支持更多的用户。

- 分组首部开销小：每个TCP报文段的首部有20字节的首部开销，而UDP首部只有8字节；

    16b：源端口号、目的端口号、长度、检验和；

    长度：首部字段 + 数据字段；

    校验和：用于确定当UDP报文段从源到达目的地移动时候，其中比特是否发生改变，也就是检查该报文段中是否出现差错；如果发生错误则丢弃；

    ```asciiarmor
    检验和计算原理：
    发送发：将报文段中的所有比特按16位一组相加，溢出则回卷（就是溢出位加在最后一位），得到结果取反码，得到检验和字段；
    接收方：按照上面计算（不含检验和字段），然后将结果与检验和字段相加，如果没有出现差错，结果应该为1111 1111 1111 1111
    原理大致为：c = a + b； 检验和字段： ^c
    接收方检验：a + b + ^c   = c + ^c = 1  (可以用 1011 与 0100 检验） 
    ```

    



