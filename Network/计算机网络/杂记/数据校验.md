#### 数据校验

##### 以太网 MAC 帧

校验码：4B，循环冗余CRC（CRC）

校验字段：目的地址 & 源地址 & 数据部分 & 类型字段；但是不校验前导码



##### IP 数据报

首部校验和：2B

校验部分：只校验分组的首部



##### UDP 报文段

UDP校验和：2B（可选，不想计算设置为 0）

校验部分：校验首部 & 数据



##### TCP 报文段

校验和：2B

校验部分：首部 & 数据



#### 计算过程

##### 发送端

1. 设置校验位为 0 
2. UDP 和 TCP 需添加伪首部进行计算（仅参与计算）；数据非偶数倍字节需填充0；
3. 计算方式：
    - 取反相加；
    - 相加取反；



##### 接收端

含校验和字段内相加：

a + b + a<sup>-</sup> + b <sup>-</sup> + 1111 -> 1111 (正确)



